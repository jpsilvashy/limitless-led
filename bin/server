#!/usr/bin/env ruby

require 'optparse'
require 'eventmachine'
require 'limitless_led'

options = {}

optparse = OptionParser.new do|opts|
  opts.banner = "Usage: server [options]"

  options[:port] = 8899

  opts.on( '-p', '--port [PORT]', "Optional port" ) do|f|
    options[:port] = f
  end
end

optparse.parse!

puts ">> Starting Limitless LED Server running on port: #{options[:port]}"

EM.run do
  EM.open_datagram_socket('0.0.0.0', options[:port], LimitlessLed::Server)
end
